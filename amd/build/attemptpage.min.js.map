{"version":3,"sources":["../src/attemptpage.js"],"names":["define","$","setup","props","quizurl","CloseOnParentClose","window","opener","closed","close","parentWindowURL","location","href","shareState","invigilatorShareState","windowSurface","invigilatorWindowSurface","value","ready","setInterval","init"],"mappings":"AAAAA,OAAM,sCAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,mBAAxB,CAAD,CACF,SAASC,CAAT,CAAY,CACR,MAAO,CACHC,KAAK,CAAE,eAASC,CAAT,CAAgB,CACnB,GAAIC,CAAAA,CAAO,CAAGD,CAAK,CAACC,OAApB,CAKA,QAASC,CAAAA,CAAT,EAA8B,CAC1B,GAA4B,WAAxB,QAAOC,CAAAA,MAAM,CAACC,MAAd,EAAyD,IAAlB,GAAAD,MAAM,CAACC,MAAlD,CAAmE,CAC/D,GAAID,MAAM,CAACC,MAAP,CAAcC,MAAlB,CAA0B,CACtBF,MAAM,CAACG,KAAP,EACH,CACJ,CAJD,IAIO,CACHH,MAAM,CAACG,KAAP,EACH,CAED,GAAIC,CAAAA,CAAe,CAAGJ,MAAM,CAACC,MAAP,CAAcI,QAAd,CAAuBC,IAA7C,CAEA,GAAIF,CAAe,GAAKN,CAAxB,CAAiC,CAC7BE,MAAM,CAACG,KAAP,EACH,CAbyB,GAetBI,CAAAA,CAAU,CAAGP,MAAM,CAACC,MAAP,CAAcO,qBAfL,CAgBtBC,CAAa,CAAGT,MAAM,CAACC,MAAP,CAAcS,wBAhBR,CAkB1B,GAAyB,MAArB,GAAAH,CAAU,CAACI,KAAf,CAAiC,CAC7BX,MAAM,CAACG,KAAP,EACH,CAED,GAA4B,SAAxB,GAAAM,CAAa,CAACE,KAAlB,CAAuC,CACnCX,MAAM,CAACG,KAAP,EACH,CACJ,CACDR,CAAC,CAACK,MAAD,CAAD,CAAUY,KAAV,CAAgB,UAAW,CACvBC,WAAW,CAACd,CAAD,CAAqB,GAArB,CACd,CAFD,EAGA,QACH,CArCE,CAsCHe,IAAI,CAAE,eAAW,CACb,QACH,CAxCE,CA0CV,CA5CC,CAAN","sourcesContent":["define(['jquery', 'core/ajax', 'core/notification'],\n    function($) {\n        return {\n            setup: function(props) {\n                var quizurl = props.quizurl;\n\n                /**\n                 * Closes attempt page upon parent window close.\n                 */\n                function CloseOnParentClose() {\n                    if (typeof window.opener != 'undefined' && window.opener !== null) {\n                        if (window.opener.closed) {\n                            window.close();\n                        }\n                    } else {\n                        window.close();\n                    }\n\n                    var parentWindowURL = window.opener.location.href;\n\n                    if (parentWindowURL !== quizurl) {\n                        window.close();\n                    }\n\n                    var shareState = window.opener.invigilatorShareState;\n                    var windowSurface = window.opener.invigilatorWindowSurface;\n\n                    if (shareState.value !== \"true\") {\n                        window.close();\n                    }\n\n                    if (windowSurface.value !== 'monitor') {\n                        window.close();\n                    }\n                }\n                $(window).ready(function() {\n                    setInterval(CloseOnParentClose, 1000);\n                });\n                return true;\n            },\n            init: function() {\n                return true;\n            }\n        };\n    });\n"],"file":"attemptpage.min.js"}